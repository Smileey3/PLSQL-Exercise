//User table creation

CREATE TABLE USER_TABLE (USR_ID   NUMBER NOT NULL,
                         NAME     VARCHAR2(25),
                         ADDRESS  VARCHAR2(50),
                         PHONE_NO NUMBER,
						 EMAIL_ID VARCHAR2(50),
						 PASSWORD VARCHAR2(30)
                         );
ALTER TABLE USER_TABLE ADD CONSTRAINT PK_USER_NAME_VAL PRIMARY KEY (USR_ID,EMAIL_ID);
	
	
//CATEGORY table creation						 
CREATE SEQUENCE CAT_ID_SEQ_VAL;	 
CREATE TABLE CATEGORY( CAT_ID        NUMBER NOT NULL,
                       CATEGORY_NAME VARCHAR2(25),
		               PROD_ID       NUMBER
		               );
					   
ALTER TABLE CATEGORY ADD CONSTRAINT PK_CATEGORY_ID_VAL PRIMARY KEY (CAT_ID);
					   
//SUPPLIER table creation	
CREATE SEQUENCE SUPP_ID_SEQ_VAL;
CREATE TABLE SUPPLIER (SUPP_ID      NUMBER   NOT NULL ,
                      SUPP_NAME     VARCHAR2(25),
                      SUPP_ADDRESS  VARCHAR2(50),
                      SUPP_PHONE    NUMBER,
		              CAT_ID        NUMBER);
					  
ALTER TABLE SUPPLIER ADD CONSTRAINT PK_SUPP_ID_VAL PRIMARY KEY (SUPP_ID);

//PRODUCT table creation						  
CREATE SEQUENCE PROD_ID_SEQ_VAL;
CREATE TABLE PRODUCT (PROD_ID INTEGER NOT NULL ,
						  PRODUCT_NAME VARCHAR2(25),
						  SUPP_ID INTEGER  ,
						  CATEGORY_ID INTEGER ,
						  PRICE INTEGER
						 );
ALTER TABLE PRODUCT ADD CONSTRAINT PK_PROD_ID_VAL PRIMARY KEY (PROD_ID);						
ALTER TABLE PRODUCT ADD CONSTRAINT FK_PRO_SUPP FOREIGN KEY (SUPP_ID) REFERENCES SUPPLIER(SUPP_ID);
ALTER TABLE PRODUCT ADD CONSTRAINT FK_PRO_CATEGORY FOREIGN KEY (CATEGORY_ID)  REFERENCES CATEGORY(CAT_ID);

CREATE INDEX INX_SUPP_ID ON PRODUCT (SUPP_ID)

CREATE INDEX INX_CAT_ID ON PRODUCT (CATEGORY_ID)



//CART table creation
CREATE SEQUENCE CART_ID_SEQ_VAL;
CREATE TABLE CART (CART_ID INTEGER NOT NULL ,
                   USR_ID INTEGER ,
		   SUPP_ID INTEGER  ,
                   PROD_ID INTEGER,
				   CAT_ID INTEGER,
				   CART_STATUS VARCHAR2(50)
				  );

ALTER TABLE CART ADD EMAIL VARCHAR2(35);
ALTER TABLE CART ADD CONSTRAINT PK_CART_ID_VAL PRIMARY KEY (CART_ID);
ALTER TABLE CART ADD CONSTRAINT FK_PRO_USR_ID FOREIGN KEY (USR_ID,EMAIL) REFERENCES USER_TABLE(USR_ID,EMAIL_ID);
ALTER TABLE CART ADD CONSTRAINT FK_PRO_PROD_ID FOREIGN KEY (PROD_ID)  REFERENCES PRODUCT(PROD_ID);

CREATE INDEX INX_USR_ID ON CART (USR_ID,EMAIL)
CREATE INDEX INX_PRODUCT_ID ON CART (PROD_ID)

//ORDER_STATUS table creation
CREATE SEQUENCE ORD_ID_SEQ_VAL;
CREATE TABLE ORDER_STATUS( ORD_ID INTEGER NOT NULL,
                          STATUS VARCHAR2(100),
                          CART_ID INTEGER ,
						  CAT_ID  INTEGER,
						  SUPP_ID INTEGER
                         );
ALTER TABLE ORDER_STATUS ADD CONSTRAINT PK_ORG_ID_VAL PRIMARY KEY (ORD_ID);

ALTER TABLE ORDER_STATUS ADD CONSTRAINT FK_PRO_CART_ID FOREIGN KEY (CART_ID)  REFERENCES CART(CART_ID);
CREATE INDEX INX_CART_ID_VAL ON ORDER_STATUS (CART_ID)

//CART_STATUS table creation
CREATE SEQUENCE STATUS_ID_SEQ_VAL;
CREATE TABLE CART_STATUS (STATUS_ID INTEGER NOT NULL,
                          STATUS VARCHAR2(100),
                          CART_ID INTEGER 
						
                          );
ALTER TABLE CART_STATUS ADD CONSTRAINT PK_STATUS_ID PRIMARY KEY(STATUS_ID)
ALTER TABLE CART_STATUS ADD CONSTRAINT FK1_PRO_CART_ID FOREIGN KEY (CART_ID)  REFERENCES CART(CART_ID);
CREATE INDEX INX_CART_VAL ON CART_STATUS (CART_ID)

//SUPPLIER_ACTION table creation
CREATE SEQUENCE ACTION_ID_SEQ_VAL;
CREATE TABLE SUPPLIER_ACTION ( ACTION_ID INTEGER NOT NULL,
                               SUPP_ID INTEGER  ,
                               CART_ID INTEGER  ,
                               SUPPLIER_STATUS VARCHAR2(25) DEFAULT 'NO'
							   );
ALTER TABLE SUPPLIER_ACTION ADD CONSTRAINT PK_ACT_ID PRIMARY KEY(ACTION_ID)
ALTER TABLE SUPPLIER_ACTION ADD CONSTRAINT FK2_PRO_CART_ID FOREIGN KEY (CART_ID)  REFERENCES CART(CART_ID);
ALTER TABLE SUPPLIER_ACTION ADD CONSTRAINT FK1_PRO_SUPP FOREIGN KEY  (SUPP_ID) REFERENCES SUPPLIER(SUPP_ID);
CREATE INDEX INX_PRO_CART ON SUPPLIER_ACTION (CART_ID)
CREATE INDEX INX_PRO_SUPP ON SUPPLIER_ACTION (SUPP_ID)

//ORDER_RETURN table creation
CREATE SEQUENCE ORD_RET_ID_SEQ_VAL;
CREATE TABLE ORDER_RETURN (ORD_RET_ID  INTEGER NOT NULL,
                           ORD_RET_STATUS VARCHAR2(35),
						   CART_ID   INTEGER);
ALTER TABLE ORDER_RETURN ADD CONSTRAINT PK_ORD_RET_ID PRIMARY KEY(ORD_RET_ID)
ALTER TABLE ORDER_RETURN ADD CONSTRAINT FK3_PRO_CART_ID FOREIGN KEY(CART_ID)  REFERENCES CART(CART_ID);
CREATE INDEX INX_CART ON ORDER_RETURN (CART_ID)

//SUPPLIER_APPROVAL table creation
CREATE SEQUENCE SUPP_APPR_ID_SEQ_VAL;
CREATE TABLE SUPPLIER_APPROVAL (SUPP_APP_ID INTEGER NOT NULL,
                                SUPP_APP_STATUS VARCHAR2(25),
                                CART_ID INTEGER,
			                    ORD_RET_ID INTEGER
			                 	
								);
ALTER TABLE SUPPLIER_APPROVAL ADD CONSTRAINT PK_SUPP_APP_ID PRIMARY KEY(SUPP_APP_ID )
ALTER TABLE SUPPLIER_APPROVAL ADD CONSTRAINT FK4_PRO_CART_ID FOREIGN KEY(CART_ID)  REFERENCES CART(CART_ID);
CREATE INDEX INX_SUPP_APP_VAL ON SUPPLIER_APPROVAL (CART_ID)


//ORG_APPROVAL table creation
CREATE SEQUENCE ORG_APP_ID_SEQ_VAL;
CREATE TABLE ORG_APPROVAL (ORG_APP_ID INTEGER NOT NULL,
                                ORG_APP_STATUS VARCHAR2(25),
								SUPP_APP_ID INTEGER
								);
ALTER TABLE ORG_APPROVAL ADD CONSTRAINT PK_ORG_APP_ID PRIMARY KEY(ORG_APP_ID )
ALTER TABLE ORG_APPROVAL ADD CONSTRAINT FK_SUPP_APP_ID_VAL FOREIGN KEY (SUPP_APP_ID)  REFERENCES SUPPLIER_APPROVAL(SUPP_APP_ID);

CREATE INDEX INX_SUPP_AP_ID_VAL ON ORG_APPROVAL (SUPP_APP_ID)

//USER_MONEY table creation
CREATE SEQUENCE USR_MONEY_ID_SEQ_VAL;
CREATE TABLE USER_MONEY (USR_MONEY_ID INTEGER NOT NULL,
                         MONEY_STATUS VARCHAR2(25),
						 USR_ID INTEGER,
						 EMAIL VARCHAR2(25)
								);
ALTER TABLE USER_MONEY ADD CONSTRAINT FK1_PRO_USR_ID FOREIGN KEY (USR_ID,EMAIL)  REFERENCES USER_TABLE(USR_ID,EMAIL_ID);

CREATE INDEX INX_USER_ID_VAL ON USER_MONEY  (USR_ID,EMAIL) 



                      

                 
